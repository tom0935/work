@model IList<IntranetSystem.Poco.WebsiteUploadPoco>
@{
    ViewBag.Title = "台北福華大飯店 - 官網廣告彈跳視窗管理";
}

<div class="row">

    <div class="col-sm-10 col-sm-offset-1">
<span class="glyphicon glyphicon-plus"></span>@Html.ActionLink("點我新增圖片", "Upload", null, new { @class = "btn btn-sm btn-default" })</span> <br /><br />
        <div class="panel panel-primary">
            <div class="panel-heading">
             <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">
               @ViewBag.Title</a>
             <span class="pull-right"><span class="pull-right">@Html.ActionLink("儲存排序", "SortUpdate", null, new { @class = "btn btn-sm btn-default sort-update" })                
            </h4>

            </div>
            <div id="collapse1" class="panel-collapse collapse">
            <div class="panel-body" style="width: 862px \9;">
                <ul id="sortable">
                    @foreach (var item in this.Model.Where(t=> t.HOTELSN == 162))  
                    {
                        <li class="ui-state-default" id="@item.UUID">
                            <div class="ad-box img-thumbnail">
                                <img src="http://www.howard-hotels.com.tw/images/banners/@item.FILE" title="@item.NAME" alt="@item.NAME">
                                <div class="ad-date text-center">@item.SDATE.ToShortDateString() ~ @item.EDATE.ToShortDateString()</div>
                                <div class="ad-title">@item.NAME</div>
                                <div class="ad-op">
                                    <a href='@Url.Action("Delete", "WebsiteUpload", new { id = @item.UUID })' title="刪除" onclick="return confirm('確定要刪除這筆資料?');">
                                        <span class="glyphicon glyphicon-remove-sign"></span></a><a href='@Url.Action("Edit", "WebsiteUpload", new { id = item.UUID })' title="編輯">
                                            <span class="glyphicon glyphicon-pencil"></span></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
            </div>
        </div>



        <div class="panel panel-primary">
            <div class="panel-heading">
             <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse2">
                墾丁福華- 官網廣告彈跳視窗管理</a>
 <span class="pull-right"><span class="pull-right">@Html.ActionLink("儲存排序", "SortUpdate", null, new { @class = "btn btn-sm btn-default sort-update" })
                    
            </h4>
               
            </div>
            <div id="collapse2" class="panel-collapse collapse">
            <div class="panel-body" style="width: 862px \9;">
                <ul id="sortable">
                     @foreach (var item in this.Model.Where(t => t.HOTELSN == 24))  
                    {
                        <li class="ui-state-default" id="@item.UUID">
                            <div class="ad-box img-thumbnail">
                                <img src="http://www.howard-hotels.com.tw/images/banners/@item.FILE" title="@item.NAME" alt="@item.NAME">
                                <div class="ad-date text-center">@item.SDATE.ToShortDateString() ~ @item.EDATE.ToShortDateString()</div>
                                <div class="ad-title">@item.NAME</div>
                                <div class="ad-op">
                                    <a href='@Url.Action("Delete", "WebsiteUpload", new { id = @item.UUID })' title="刪除" onclick="return confirm('確定要刪除這筆資料?');">
                                        <span class="glyphicon glyphicon-remove-sign"></span></a><a href='@Url.Action("Edit", "WebsiteUpload", new { id = item.UUID })' title="編輯">
                                            <span class="glyphicon glyphicon-pencil"></span></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
            </div>
        </div>


        <div class="panel panel-primary">
            <div class="panel-heading">
             <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapse3">
                高雄福華- 官網廣告彈跳視窗管理</a>
 <span class="pull-right"><span class="pull-right">@Html.ActionLink("儲存排序", "SortUpdate", null, new { @class = "btn btn-sm btn-default sort-update" })
                    
            </h4>
               
            </div>
            <div id="collapse3" class="panel-collapse collapse">
            <div class="panel-body" style="width: 862px \9;">
                <ul id="sortable">
                     @foreach (var item in this.Model.Where(t => t.HOTELSN == 165))  
                    {
                        <li class="ui-state-default" id="@item.UUID">
                            <div class="ad-box img-thumbnail">
                                <img src="http://www.howard-hotels.com.tw/images/banners/@item.FILE" title="@item.NAME" alt="@item.NAME">
                                <div class="ad-date text-center">@item.SDATE.ToShortDateString() ~ @item.EDATE.ToShortDateString()</div>
                                <div class="ad-title">@item.NAME</div>
                                <div class="ad-op">
                                    <a href='@Url.Action("Delete", "WebsiteUpload", new { id = @item.UUID })' title="刪除" onclick="return confirm('確定要刪除這筆資料?');">
                                        <span class="glyphicon glyphicon-remove-sign"></span></a><a href='@Url.Action("Edit", "WebsiteUpload", new { id = item.UUID })' title="編輯">
                                            <span class="glyphicon glyphicon-pencil"></span></a>
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
            </div>
        </div>


    </div>
</div>
@section header{
    <style>
        .ad-box
        {
            position: relative;
            float: left;
            margin: 5px;
        }
        .ad-date
        {
            background-color: #084B8A;
            padding: 2px;
            color: #FFFFFF;
        }
        
        .ad-title
        {
            background-color: #070719;
            width: 100%;
            height: 36px;
            font-size: large;
            text-align: center;
            color: #FFFFFF;
            padding: 3px;
        }
        .ad-op
        {
            position: absolute;
            top: 6px;
            right: 6px;
            z-index: 10;
            padding: 5px;
            font-size: x-large;
            background-color: #FFFFFF;
            filter: alpha(opacity=80);
            -moz-opacity: 0.8;
            opacity: 0.8;
            -khtml-opacity: 0.8;
        }
        .ad-op a
        {
            padding: 5px;
        }
        .ad-op a:hover
        {
            color: #FF0000;
        }
    </style>
}
@section scripts{
    <link href="~/Scripts/dragdrop/jquery-ui.min.css" rel="stylesheet" type="text/css">
    <script src="~/Scripts/dragdrop/jquery-ui.min.js" type="text/javascript"></script>
    <style>
        #sortable
        {
            list-style-type: none;
        }
        #sortable li
        {
            float: left;
        }
    </style>
    <script>
        $(function () {
            $("#sortable").sortable({
                cursor: "move",
                items: "li",
                opacity: 0.6
            });
            $("#sortable").disableSelection();
        });

        $(document).on('click', '.sort-update', function (event) {
            var sortText = "";
            $("#sortable li").each(function () {
                sortText = sortText + $(this).attr("id") + ",";
            });
            $.ajax({
                async: true,
                type: "POST",
                url: '@Url.Action("SortUpdate")',
                data: { sortData: sortText }
            }).done(function (msg) {
                alert(msg);
            });
            return false;
        });
    </script>
}
